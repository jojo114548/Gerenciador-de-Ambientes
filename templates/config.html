<!-- ==================== DEPENDÊNCIAS ==================== -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="/static/Css/config.css">

<!-- ==================== MODAL CONFIGURAÇÃO ==================== -->
<div class="modal-configuracao">

  <!-- HEADER -->
  <div class="header">
    <div>
      <h2>Configurações</h2>
      <small>Gerencie sua conta</small>
    </div>
    <div>
      <button onclick="FecharConfig()">✕</button>
    </div>
  </div>

  <!-- CONTAINER PRINCIPAL -->
  <div class="container">

    <!-- ==================== SIDEBAR ==================== -->
    <div class="sidebar">
      <button class="active" onclick="perfil()">
        <i class="fa-solid fa-user"></i> Perfil
      </button>
      <button onclick="modalSeguranca()">
        <i class="fa-solid fa-lock"></i> Segurança
      </button>
      <button onclick="privacidade()">
        <i class="fa-solid fa-shield-halved"></i> Privacidade
      </button>
    </div>

    <!-- ==================== CONTENT ==================== -->
    <div class="content">

      <!-- SEÇÃO: PERFIL -->
      <div class="modal-perfil" id="edit-user-modal">
        <h3>Informações Pessoais</h3>
        <p>Atualize seus dados</p>

        {% for user in usuarios %}
        {% if user.id == id_logado %}

        <!-- Avatar -->
        <div class="user-avatar" >
          <img src="{{ user.image or '/static/imgs/default.png' }}"
               alt="Foto de perfil"
               class="image-perfil">
        </div>

        <!-- GRID -->
        <div class="grid">

          <div>
            <label>Nome</label>
            <input type="text" id="name" value="{{ user.name }}">
          </div>

          <div>
            <label>Email</label>
            <input type="email" id="email" value="{{ user.email }}">
          </div>

          <div>
            <label>CPF</label>
            <input type="text" id="cpf" value="{{ user.cpf or '' }}" placeholder="000.000.000-00">
          </div>

          <div>
            <label>RG</label>
            <input type="text" id="rg" value="{{ user.rg or '' }}">
          </div>

          <div>
            <label>Data de Nascimento</label>
            <input type="date" id="data_nascimento" value="{{ user.data_nascimento }}">
          </div>

          <div>
            <label>Telefone</label>
            <input type="tel" id="telefone" value="{{ user.telefone or '' }}">
          </div>

          <div>
            <label>Departamento</label>
            <input type="text" id="departamento" value="{{ user.departamento or '' }}">
          </div>

          <div>
            <label>Função</label>
            <input type="text" id="funcao" value="{{ user.funcao or '' }}">
          </div>

          <div class="grid-full">
            <label>Endereço</label>
            <input type="text" id="endereco" value="{{ user.endereco or '' }}">
          </div>

        </div>

        <!-- AÇÕES -->
        <div class="actions">
          <button
            class="save"
                type="submit" 
               onclick="abrirEditarUsuario(
  '{{ user.id }}',
  '{{ user.image }}',
  '{{ user.name }}',
  '{{ user.email }}',
  '{{ user.cpf }}',
  '{{ user.rg }}',
  '{{ user.data_nascimento }}',
  '{{ user.telefone }}',
  '{{ user.endereco }}',
  '{{ user.departamento }}',
  '{{ user.funcao }}',
  '{{ user.role }}',
  '{{ user.status }}'
)">
                Editar Perfil
          </button>
        </div>

        {% endif %}
        {% endfor %}
      </div>

      <!-- SEÇÃO: SEGURANÇA -->
      <div class="modal-seguranca" style="display: none;">
  <form id="form-alterar-senha" onsubmit="alterarSenha(event)">
    <input 
      type="password" 
      id="senha-nova" 
      placeholder="Nova Senha" 
      minlength="6"
      required 
    />
    <input 
      type="password" 
      id="confirmar-senha" 
      placeholder="Confirmar Senha" 
      minlength="6"
      required 
    />
    
    <!-- ✅ Este botão APENAS altera a senha -->
    <button type="submit">Alterar Senha</button>
  </form>
</div>

      <!-- SEÇÃO: PRIVACIDADE -->
      <div id="privacidade" class="modal-privacidade">
        <h3>Privacidade</h3>
        <p>Configure suas preferências</p>

        <div class="section">
          <div class="toggle">
            <span>Mostrar Email</span>
            <input type="checkbox" checked>
          </div>

          <div class="toggle">
            <span>Permitir Mensagens</span>
            <input type="checkbox" checked>
          </div>
        </div>
      </div>

    </div>
    <!-- FIM CONTENT -->

  </div>
  <!-- FIM CONTAINER -->

</div>

<!-- ==================== MODAIS AUXILIARES ==================== -->
{% include 'modais/modal_usuario_config.html' %}

<!-- ==================== SCRIPTS ==================== -->
<script src="/static/Javascript/config.js"></script>
