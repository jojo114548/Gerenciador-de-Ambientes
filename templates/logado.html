<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamentos</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/Css/geral.css">
    <link rel="stylesheet" href="/static/Css/base.css">
     <link rel="stylesheet" href="/static/css/modal_notificacao.css">
     <link rel="stylesheet" href="/static/Css/modal_agendamento.css">
     <link rel="stylesheet" href="/static/Css/eventos.css">

    

    <!-- Fonte -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

<div id="dashboard" class="dashboard">

    <!-- Sidebar -->
    {% include 'base.html' %}

    <!-- Notifica√ß√µes -->
    {% include 'notificacao.html' %}

    <!-- Conte√∫do Principal -->
    <main class="main-content">

        <!-- Topbar -->
        <div class="topbar">
          <div></div>

            <div class="topbar-actions">
                <button class="icon-button" onclick="modalConfig(event)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>

                </button>
                <button class="icon-button" onclick="modal_notificacao()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span id="badge-notificacao" class="badge-notificacao"></span>
                </button>
            </div>
        </div>

        <div class="content-wrapper">
            <div class="content-main">

                <!-- EVENTOS -->
                <section class="section">
                    <div class="section-header">
                        <h2>Eventos Pr√≥ximos</h2>
                    </div>

                    <div class="cards-grid">
                        {% for event in evento[:3] %}
                        <div class="event-card" data-event-id="{{ event.id }}" data-inscrito="{{ 'true' if event.inscrito else 'false' }}" >


                            <div class="event-header">
                                <img src="{{ event.image }}" class="eventos-imagem" style="display:none;">
                                <span class="event-data">{{ event.data_evento }}</span>
                                <span class="event-hora">{{ event.hora_evento }}</span>
                                <h3 class="event-titulo">{{ event.titulo }}</h3>
                                <span class="event-local">{{ event.localizacao }}</span>
                            </div>

                            <div class="event-body">
                                <p class="event-desc">{{ event.descricao }}</p>

                                <div class="event-meta">
                                    <span class="event-capacidade"
                                          data-participantes="{{ event.participantes }}"
                                          data-capacidade="{{ event.capacidade }}">
                                        üë• {{ event.participantes }}/{{ event.capacidade }}
                                    </span>

                                    <span class="event-instrutor">
                                        Instrutor: {{ event.instrutor }}
                                    </span>
                                </div>

                                               <div class="actions">
                {% if event.inscrito %}
    <button class="btn-reserve btn-inscrito" disabled>
        Inscrito
    </button>

{% elif event.participantes >= event.capacidade %}
    <button class="btn-reserve" disabled>
        Lotado
    </button>

{% else %}
    <button
        class="btn-reserve"
        onclick="inscreverEvento('{{ event.id }}')">
        Inscrever-se
    </button>
{% endif %}
             


<button class="btn-details" onclick="abrirModalDetalhes(this)">
    Ver Detalhes
  </button>
  </div>        
                            </div>

                        </div>
                        {% endfor %}
                    </div>
                </section>

             

                <!-- AMBIENTES -->
                    <section class="section">
                    <div class="section-header">
                        <h2>Ambientes Dispon√≠veis</h2>
                    </div>
                    <div class="cards-grid">
                        {% for space in ambientes %}
                        
                        <div class="card" 
                             data-ambiente-id="{{ space.id }}"
                             data-ambiente-nome="{{ space.name }}"
                             data-ambiente-descricao="{{ space.descricao or '' }}"
                             data-ambiente-capacidade="{{ space.capacidade }}"
                             data-ambiente-localizacao="{{ space.localizacao or '' }}"
                             data-ambiente-area="{{ space.area or '' }}"
                             data-ambiente-status="{{ space.status }}"
                             data-ambiente-recursos="{{ space.recursos|join('|') if space.recursos else '' }}">
                           
                            <img src="{{ space.image }}" class="ambiente-imagem" alt="{{ space.name }}"/>
                                                     
                            <div class="card-body">
                                <h3 class="ambiente-nome">{{ space.name }}</h3>
                                <span class="ambiente-status" style="display:none;">{{ space.status }}</span>

                                {% if space.descricao %}
                                <p class="ambiente-descricao">{{ space.descricao }}</p>
                                {% else %}
                                <p class="ambiente-descricao">Sem descri√ß√£o dispon√≠vel</p>
                                {% endif %}

                                <div class="info">
                                    <span class="ambiente-capacidade">{{ space.capacidade }} pessoas</span>
                                    {% if space.localizacao %}
                                    <span class="ambiente-localizacao">{{ space.localizacao }}</span>
                                    {% endif %}
                                </div>

                                <div class="recursos-preview" style="display: none;">
                                    <h4>Recursos:</h4>
                                    {% for recurso in space.recursos %}
                                        <li>{{ recurso }}</li>
                                        {%endfor%}
                                </div>
                               

                                <div class="actions">
                                    <button class="btn-details" onclick="abrirModalDetalhesAmbiente(this)" data-ambiente='{{ space|tojson }}'>
                                        Ver Detalhes
                                    </button>
                                    <button class="btn-reserve" onclick="abrirModalAgendamento('{{ space.id }}', '{{ space.name }}')">
                                        Reservar
                                    </button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>


                <!-- EQUIPAMENTOS -->
                <section class="section">
                    <div class="section-header">
                        <h2>Equipamentos </h2>
                        <a href="/equipamentos" class="link-primary">Ver todos</a>
                    </div>

                    <div class="cards-grid">
                        {% for equipamento in equipamentos[:3] %}
                        <div class="card">
                            <img src="{{ equipamento.image }}" class="equipamentos-imagem">

                        <div class="card-body">
                             <h3 class="equipamento-titulo">{{ equipamento.title }}</h3>
                            <span class="equipamento-nome">{{ equipamento.name }}</span>
                            <p class="equipamento-descricao">{{ equipamento.descricao }}</p>
                             <span class="equipamento-marca" style="display:none">{{ equipamento.marca }}</span>
                         <div class="info">
                            <span class="equipamento-categoria"> {{ equipamento.categoria }} </span>
                            <span class="equipamento-modelo"> {{ equipamento.modelo}}</span>
                            <span class="equipamento-condicao" style="display:none"> {{ equipamento.condicao }} </span>
                            <span class="equipamento-status" style="display:none">{{ equipamento.status }}</span>
                            </div>
                                <div class="actions">
                                    <button class="btn-details" onclick="abrirModalDetalhesEquipamento(this)">
                                        Ver Detalhes
                                    </button>
                                     <button class="btn-reserve"
                  onclick="abrirModalAgendamentoEquipamento(
                    '{{ equipamento.id }}',
                    '{{ equipamento.name }}'
                  )">
            Reservar
          </button>
                                </div>
                                <div class="recursos-equip" style="display: none;">
                                 <h4>Recursos:</h4>
                                 <ul> {% for recurso in equipamento.especificacoes %}    
                                 <li>{{ recurso }}</li>
                                 </ul>
                                 {% endfor %}
                               </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>

            </div>
        </div>
    </main>
</div>

<!-- Modais -->
{% include 'modais/modal_evento_detalhes.html' %}
{% include 'modais/modal_ambiente_agendamento.html' %}
{% include 'modais/modal_ambiente_detalhes.html' %}
{% include 'modais/modal_equipamento_agendamento.html' %}
{% include 'modais/modal_equipamento_detalhes.html' %}
{%include 'config.html' %}


<script src="/static/Javascript/eventos.js"></script>
</body>
</html>
